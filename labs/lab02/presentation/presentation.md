---
## Front matter
lang: ru-RU
title: Лабораторная работа №2
subtitle: Управление пользователями и группами
author:
  - Ко А.Г.
institute:
  - Российский университет дружбы народов, Москва, Россия
date: 18 февраля 2025

## i18n babel
babel-lang: russian
babel-otherlangs: english

## Formatting pdf
toc: false
toc-title: Содержание
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
header-includes:
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
---

# Информация

## Докладчик

:::::::::::::: {.columns align=center}
::: {.column width="70%"}

  * Ко Антон Геннадьевич
  * Студент
  * Российский университет дружбы народов
  * [1132221551@pfur.ru](mailto:1132221551@pfur.ru)
  * <https://github.com/SenDerMen04>

:::
::::::::::::::

## Цель работы:

Целью данной работы является получение представления о работе с учётными записями пользователей и группами пользователей в операционной системе типа Linux.

## Выполнение работы:

![Использование команд: whoami, id, su.]

Войдём в систему как обычный пользователь и откроем терминал. Определим, какую учётную запись пользователя мы используем, введя команду **whoami**. Выведем на экран более подробную информацию, используя команду **id** (**UID** -- id пользователя равный 1000. **GID** -- id группы равный 1000). Используем команду **su** для переключения к учётной записи **root**. При запросе пароля вводим пароль пользователя **root**. Наберём id (**UID** -- id пользователя равный 0. **GID** -- id группы равный 0).

Далее просмотрим в безопасном режиме файл **/etc/sudoers**.

После мы должны убедиться, что в открытом с помощью visudo файле присутствует строка `%wheel ALL=(ALL) ALL`.

![Проверка наличия строки в файле.]

По закрытию файла создаём пользователя alice, входящего в группу wheel.

Нужно убедиться, что пользователь alice добавлен в группу wheel.

Далее задаем пароль для пользователя alice.

![Создание пользователя alice (группа wheel), проверка создания командой id, создание пароля для alice.]

![Переключение на пользователя alice, создание пользователя bob и последующая проверка, установка пароля для bob.]

Переключаемся в терминале на учётную запись пользователя root. Далее открываем файл конфигурации `/etc/login.defs` для редактирования.

![Переключение на пользователя root. Открытие файла.]

В файле требуется изменить несколько параметров. Для начала найдём параметр `CREATE_HOME` и убедимся, что он установлен в значение `yes`. Теперь установим параметр `USERGROUPS_ENAB no`. Это позволит не добавлять нового пользователя в группу с тем же именем, что и пользователь, а использовать группу users.

![Изменение параметра USERGROUPS_ENAB yes на USERGROUPS_ENAB no.]

![Параметр CREATE_HOME верно написан.]

После закрытия файла перейдём в каталог `/etc/skel`. В этом каталоге создаём подкаталоги `Pictures` и `Documents`. Выполняем проверку создания командой: `ls`. Теперь нам нужно изменить содержимое файла `.bashrc`, добавив строку: `export EDITOR=/usr/bin/vim`.

![Открытие каталога /etc/skel и создание подкаталогов Pictures и Documents, проверка создания и открытие файла .bashrc.]

![Добавление строки: export EDITOR=/usr/bin/vim.]

Используя утилиту `useradd`, создаём пользователя carol и установим пароль для пользователя carol. Посмотрим информацию о пользователе carol.

![Создание пользователя carol и установка пароля. Просмотр информации о пользователе carol.]

Теперь нам нужно убедиться, что каталоги `Pictures` и `Documents` были созданы в домашнем каталоге пользователя carol.

Изменим свойства пароля пользователя carol следующей командой: `passwd -n 30 -w 3 -x 90 carol` (в этой записи срок действия пароля истекает через 90 дней (-x 90). За три дня до истечения срока действия пользователь получит предупреждение (-w 3). Пароль должен использоваться как минимум за 30 дней (-n 30) до того, как его можно будет изменить).

![Изменение свойства пароля пользователя carol.]

После, нам нужно убедиться, что идентификатор alice существует во всех трёх файлах: `grep alice /etc/passwd /etc/shadow /etc/group` и то, что идентификатор carol существует не во всех трёх файлах: `grep carol /etc/passwd /etc/shadow /etc/group`.

![Проверка идентификатора в файлах.]

Далее, нам требуется создать две группы и добавить некоторых пользователей в эти группы. Находясь под учётной записью пользователя root, создаем группы `main` и `third`: `groupadd main`, `groupadd third`. Затем, используем `usermod` для добавления пользователей alice и bob в группу `main`, а carol, dan, dave и david - в группу `third`.

![Создание Dave, David и Dan.]

![Создание двух групп и добавление в них пользователей.]

![Проверка.]

Определяем, участниками каких групп являются другие созданные пользователи (alice и bob входят в группу main. carol, david, dave, dan в группу third).

![Определение, участниками каких групп являются созданные пользователи.]

## Ответы на контрольные вопросы:

1. При помощи какой команды можно получить информацию о номере, назначенном пользователю Linux, о группах, в которые включён пользователь?  
   **Ответ:** `id`.

2. Какой UID имеет пользователь root?  
   **Ответ:** `UID=0`.

3. В чём состоит различие между командами `su` и `sudo`?  
   **Ответ:** Основное различие между ними заключается в пароле, который им требуется: в то время как "sudo" требует пароля текущего пользователя, "su" требует ввода пароля пользователя root. Совершенно очевидно, что "sudo" является лучшей альтернативой между ними с точки зрения безопасности.

4. В каком конфигурационном файле определяются параметры sudo?  
   **Ответ:** `/etc/sudoers`.

5. Какую команду следует использовать для безопасного изменения конфигурации sudo?  
   **Ответ:** `visudo`.

6. Если вы хотите предоставить пользователю доступ ко всем командам администратора через sudo, членом какой группы он должен быть?  
   **Ответ:** `admin`.

7. Какие файлы/каталоги можно использовать для определения параметров, которые будут использоваться при создании учётных записей пользователей?  
   **Ответ:** `/etc/login.defs` и `/etc/default/useradd`.

8. В каких файлах хранятся пароли пользователей, учётные записи групп?  
   **Ответ:** `/etc/shadow`, `/etc/group`.

9. Какие команды вы можете использовать для изменения информации о пароле пользователя?  
   **Ответ:** `passwd` и `gpasswd`.

10. Сколько групп вы можете создать в файле `/etc/passwd`? Поясните свой ответ.  
    **Ответ:** Любое количество.

11. Какую команду следует использовать для изменения файла `/etc/group` вручную?  
    **Ответ:** `emacs /etc/group` или `vim /etc/group`.

## Вывод:

В ходе выполнения лабораторной работы были получены представление о работе с учётными записями пользователей и группами пользователей в операционной системе типа Linux.